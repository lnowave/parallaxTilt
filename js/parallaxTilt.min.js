// Author:liweibo
// lnowave@outlook.com
(function(e,d,a,f){var c=(function(g){return{Tablet:(g.indexOf("windows")!=-1&&g.indexOf("touch")!=-1&&g.indexOf("tablet pc")==-1)||g.indexOf("ipad")!=-1||(g.indexOf("android")!=-1&&g.indexOf("mobile")==-1)||(g.indexOf("firefox")!=-1&&g.indexOf("tablet")!=-1)||g.indexOf("kindle")!=-1||g.indexOf("silk")!=-1||g.indexOf("playbook")!=-1,Mobile:(g.indexOf("windows")!=-1&&g.indexOf("phone")!=-1)||g.indexOf("iphone")!=-1||g.indexOf("ipod")!=-1||(g.indexOf("android")!=-1&&g.indexOf("mobile")!=-1)||(g.indexOf("firefox")!=-1&&g.indexOf("mobile")!=-1)||g.indexOf("blackberry")!=-1,Android:g.indexOf("android")!=-1}})(d.navigator.userAgent.toLowerCase());e.fn.parallaxTilt=function(h){var g=this;return this.each(function(j,k){h=e.extend({i:j,el:k},h);new b(h)})};function b(h){var g=this;this.opts=e.extend({parallaxMultiple:0.1,tiltMultiple:0.05,duration:500,easing:"easeOutExpo"},h);this.$el=e(h.el);this.$hoverTaget=this.$el.parent();this.$window=e(d);this.$body=e("body");this.center={x:Math.floor(this.$window.width()/2),y:Math.floor(this.$window.height()/2)};if(c.Mobile||c.Android){d.addEventListener("deviceorientation",e.proxy(this.orientationchange,this))}else{this.$hoverTaget.on("mousemove.parallaxTilt",e.proxy(this.mousemove,this));this.$hoverTaget.on("mouseout.parallaxTilt",e.proxy(this.mouseout,this))}}b.prototype.mousemove=function(i){var l={x:i.clientX,y:i.clientY};var k=Math.floor((this.center.y-l.y)*this.opts.parallaxMultiple);var j=Math.floor((this.center.x-l.x)*this.opts.parallaxMultiple);var h=Math.floor((this.center.y-l.y)*this.opts.tiltMultiple);var g=Math.floor((l.x-this.center.x)*this.opts.tiltMultiple);this.render({top:k,left:j},{tiltX:h,tiltY:g})};b.prototype.mouseout=function(i){var k=0;var j=0;var h=0;var g=0;this.render({top:k,left:j},{tiltX:h,tiltY:g})};b.prototype.orientationchange=function(j){var n=0;var m=j.beta;var g=j.gamma;var l=Math.floor((m-55)*3*this.opts.parallaxMultiple);var k=Math.floor((g)*3*this.opts.parallaxMultiple);var i=0;var h=0;this.render({top:l,left:k},{tiltX:i,tiltY:h})};b.prototype.render=function(h,g){this.$el.css({marginTop:h.top,marginLeft:h.left,transform:"rotateX("+g.tiltX+"deg) rotateY("+g.tiltY+"deg)",})}})(jQuery,this,this.document);